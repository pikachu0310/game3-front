# 管理者ページ操作説明

## 新規イベント作成手順

### 1. イベント詳細ページの作成

**この作業はサイト上ではなく、Markdownファイルを作成・編集して行います**。

本サイトは、リポジトリの[`/content`](https://github.com/traPtitech/game3-front/tree/main/content)フォルダ以下のMarkdownファイルを読み込んでページを表示することができます。この機能の詳細は<https://github.com/traPtitech/game3-front/blob/main/docs/dev-note.md#ページの作成>を参照してください。

イベント詳細ページは、`/content/event/`フォルダ以下にイベントのID(例: `18th`)をファイル名とするMarkdownファイルを作成することで表示できます。

例：`/content/event/18th.md` → <https://game3.trap.games/event/18th>

(`/content/event/18th/index.md` → <https://game3.trap.games/event/18th> の構造も可能です。フォルダでまとめたい場合このようにしてください)

サイト上でのイベント詳細ページへのリンク(ヘッダーのナビゲーションからのリンク等)はすべて`https://game3.trap.games/event/{{ id }}`の形にしているため、**イベント詳細ページのMarkdownファイルは必ず`/content/event/{{ id }}.md`または`/content/event/{{ id }}/index.md`で作成してください**。

イベント詳細ページのMarkdownファイルの中身は以下のようにします。

```md [/content/event/18th.md]

# 第18回Game³

## 出展情報

<ContentEntryList slug="18th"></ContentEntryList>

## 開催概要

![第18回Game³イメージイラスト](/api/events/18th/image)

### 第18回 ゲーム制作者交流イベント Game³

ウェブサイトとロゴを一新し、心機一転新しいGame³がはじまります！

Game³とは、ゲーム制作者同士の交流を目的とした東京工業大学デジタル創作同好会traP主催のイベントです。
展示時間にターム制を採用しており、ブースの展示者も他タームの出展を見学できます。参加者としても展示者としても感想や質問などの交流を行うことが可能です。
また、当日は参加者投票を行い優秀作品の表彰も行います。ささやかながら景品を贈呈させていただきます。
もちろん、ゲーム展示をしない方のご参加も大歓迎です。皆さんのお越しをお待ちしております！

| 開催日時 | 2024年3月17日 (日)<br>13:00 - 18:00                                                                                        |
| -------- | -------------------------------------------------------------------------------------------------------------------------- |
| 会場     | [東京工業大学 大岡山キャンパス 南2号館 S2-201,202,203講義室](https://www.ssc.titech.ac.jp/amap/home/ookayama/south/bldg2/) |
| 入場料   | 無料                                                                                                                       |

![会場までの案内図](/img/content/18th/map18th.png)

## 出展者向け情報

<ContentEntryButton slug="18th"></ContentEntryButton>

展示する内容に縛りはなく、作成途中の作品はもちろん、個人制作やチーム制作などの制作形態でも制限はございません。お気軽にご出展ください！
学生大歓迎のイベントではございますが、どなたでも出展可能です。

| 応募締め切り     | <ContentSubmitEnd slug="18th"></ContentSubmitEnd>                                                                                                         |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| 出展スペース     | 100×100 cmの長机2台                                                                                                                           |
| 出展料           | 無料                                                                                                                                          |
| 申し込み方法     | Game³のDiscordサーバーにご参加いただいたのち、当サイト上で作品情報の登録・編集が可能です。<br>出展に関するご案内はDiscordサーバーで行います。 |
| 貸し出し可能備品 | 椅子、電源タップ、養生テープ                                                                                                                  |
```

見出しや表、リンクは自動的にスタイリングされます。これらのスタイルの変更方法は<https://github.com/traPtitech/game3-front/blob/main/docs/dev-note.md#content>を参照してください。

画像を表示したい場合、以下のようにしてください。画像は自動で横幅いっぱいに表示されます。

- イベントのメイン画像を表示する
  - `![第18回Game³イメージイラスト](/api/events/18th/image)`
  - `18th`としている部分はイベントのIDに置き換えてください。
- ファイルをアップロードして表示する
  - 画像ファイルを`/public/img/content/`に配置してください
  - 例えば`/public/img/content/18th/map18th.png`に配置した場合、Markdown内では`![会場までの案内図](/img/content/18th/map18th.png)`のパスで参照できます(`/public`部分は不要)
- 外部の画像を表示する
  - `![会場までの案内図](https://example.com/path/to/image.png)`

申請済みゲーム一覧や応募ボタン、応募締め切りを簡単に表示できるよう、以下のコンポーネントが使用できます。

- `<ContentEntryList slug="18th"></ContentEntryList>`
  - 申請済みゲーム一覧を表示します。`slug`属性にイベントのIDを指定してください。
  - 編集する場合`/components/content/EntryList.vue`を編集してください。
- `<ContentEntryButton slug="18th"></ContentEntryButton>`
  - 応募ボタンを表示します。`slug`属性にイベントのIDを指定してください。
  - 応募期間前は「応募はまだ開始されていません」と表示されます。
  - 応募期間中は作品登録ページを開くボタンが表示されます。
  - 応募期間後は「応募は締め切りました！」と表示されます。
  - 編集する場合`/components/content/EntryList.vue`を編集してください。
- `<ContentSubmitEnd slug="18th"></ContentSubmitEnd>`
  - 応募締め切りを表示します。`slug`属性にイベントのIDを指定してください。
  - 編集する場合`/components/content/ContentSubmitEnd.vue`を編集してください。

### 2. イベントの作成

**この作業はサイト上で行います**。[イベント管理ページ](/admin/event)にアクセスし、イベント一覧表下部の「新規イベント作成」ボタンをクリックします。

イベント情報入力フォームが開くので、必要事項を入力してください。
入力できたら「登録確認」ボタンをクリックし、入力内容を確認してください。内容に誤りがなければ「登録」ボタンをクリックしてください。イベントが作成されます。

[イベント管理ページ](/admin/event)のイベント一覧に新規作成したイベントが表示されていることを確認してください。

この作業が完了すると、ページ上の最新回タイトル表示や最新回へのリンクが更新されます。最新回はイベントの開催日から自動で算出されます。

イベントの申し込み期間になると、[作品登録ページ](/entry/register)から作品が登録できるようになります。

### 3. 申請済み作品の公開処理

**この作業はサイト上で行います**。

申請された作品は、デフォルトでは管理者と申請者のみが閲覧できる状態になっています。全体公開するためには、その作品の編集ページから"公開状態"を変更する必要があります。

[イベント管理ページ](/admin/event)から、その作品が申請されたイベントの管理ページにアクセスします。(`/admin/event/{{ id }}`)

イベント管理ページの「申請済みゲーム一覧」タブから、公開したい作品の「編集ページ」リンクを開きます。作品の編集ページが開くので、"公開状態"を"公開"に変更してください。

変更後「更新確認」ボタンをクリックし、変更内容を確認してください。内容に誤りがなければ「登録する」ボタンをクリックしてください。作品が公開されます。

この作業により公開状態となった作品は、イベントゲーム一覧ページ(`/event/{{ id  }}/games`)と`<ContentEntryList slug="18th"></ContentEntryList>`に表示されるようになります。

### 4. タームの作成

**この作業はサイト上で行います**。

申請された作品は、デフォルトでは「未割当用ターム」という名前のタームに割り当てられています。タームを作成し、作品を割り当てることで`<ContentEntryList slug="18th"></ContentEntryList>`内に表示される作品をタームごとに分けることができます。

[イベント管理ページ](/admin/event)から、対象イベントの管理ページにアクセスします。(`/admin/event/{{ id }}`)

イベント管理ページの「ターム一覧」タブを開き、一覧表下部の「ターム新規作成」ボタンをクリックします。表示されるモーダル内のフォームに必要事項を入力してください。入力後「作成」ボタンをクリックしてください。タームが作成されます。

タームの名前("ターム1", "ターム2",...)はそのタームの開始時刻から自動で算出・表示しているため入力欄を設けていません。タームの開始時刻を編集すると、一覧等でのターム名も自動で変更されます。

**`<ContentEntryList slug="18th"></ContentEntryList>`内に表示される作品について**

- タームを一つも作成しておらず、**ターム一覧に「未割当用ターム」のみが存在するとき**、ContentEntryListにはすべての公開済み作品が表示されます。
- **タームを一つ以上作成している場合**、ContentEntryListには**ターム割り当て済みの作品のみが表示されます**。ターム未割当の作品は表示されません。
  - タームの作成後は速やかに作品をタームに割り当て作業を行ってください。

### 5. 申請済み作品のターム割り当て

この作業はサイト上で行います。

申請された作品は、デフォルトでは未割当用タームが割り当てられています。タームを割り当てるには、その作品の編集ページからタームを変更する必要があります。

[イベント管理ページ](/admin/event)から、その作品が申請されたイベントの管理ページにアクセスします。(`/admin/event/{{ id }}`)

イベント管理ページの「申請済みゲーム一覧」タブから、公開したい作品の「編集ページ」リンクを開きます。作品の編集ページが開くので、ターム選択欄から割り当てたいタームを選択してください。

変更後「更新確認」ボタンをクリックし、変更内容を確認してください。内容に誤りがなければ「登録する」ボタンをクリックしてください。作品が公開されます。

この作業によりターム割り当てされた作品は、`<ContentEntryList slug="18th"></ContentEntryList>`でのタームごとの一覧に表示されるようになります。

(申請済みゲーム一覧タブ内のターム列をクリックすることでもタームの編集ができますが挙動が不安定です)
